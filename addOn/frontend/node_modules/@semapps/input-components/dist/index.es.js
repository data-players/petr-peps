import r,{useCallback as t,useEffect as e}from"react";import{ImageInput as n,useRecordContext as o,AutocompleteArrayInput as a,AutocompleteInput as i,TextInput as c,ReferenceArrayInput as u,ReferenceInput as f}from"react-admin";import{useDataServers as l}from"@semapps/semantic-data-provider";import{useController as s}from"react-hook-form";function m(r){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function p(){return(p=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r}).apply(this,arguments)}function y(r,t){if(null==r)return{};var e,n,o=function(r,t){if(null==r)return{};var e,n,o={},a=Object.keys(r);for(n=0;n<a.length;n++)e=a[n],t.indexOf(e)>=0||(o[e]=r[e]);return o}(r,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)e=a[n],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(r,e)&&(o[e]=r[e])}return o}var b=function(r){return"string"==typeof r?{src:r}:Array.isArray(r)?r.map((function(r){return"string"==typeof r?{src:r}:r})):r},v=function r(t){return t instanceof File?{rawFile:e=t,src:URL.createObjectURL(e),title:e.name}:t&&t.src&&!t.rawFile?t.src:Array.isArray(t)?t.map((function(t){return r(t)})):t;var e},d=function(t){return r.createElement(n,p({},t,{format:b,parse:v}))},O=function(t){var e=t.optionText,n=t.dataServers,a=o(),i=n&&Object.values(n).find((function(r){return a.id.startsWith(r.baseUrl)}));return r.createElement("span",null,a[e],i&&r.createElement("em",{className:"serverName",style:{color:"grey"}},"Â (",i.name,")"))},g=["optionText"],h=function(e){var n=e.optionText,o=y(e,g),i=l(),c=t((function(r,t){return t[n].toLowerCase().match(r.toLowerCase())}),[n]);return r.createElement(a,p({matchSuggestion:c,optionText:r.createElement(O,{optionText:n,dataServers:i}),inputText:function(r){return r[n]}},o))},j=["optionText"],x=function(e){var n=e.optionText,o=y(e,j),a=l(),c=t((function(r){if(r&&a){var t=Object.values(a).find((function(t){return r.id.startsWith(t.baseUrl)}));return r[n]+(t?" (".concat(t.name,")"):"")}}),[n,a]);return r.createElement(i,p({optionText:c},o))},A=function(t){return r.createElement(c,p({multiline:!0,minRows:2,format:function(r){return r?Array.isArray(r)?r.join("\n"):r:""},parse:function(r){return r.split(/\r?\n/)}},t))},E=function(t){var n=s({name:t.source}).field,o=n.value,a=n.onChange;return e((function(){o&&!Array.isArray(o)&&a([o])}),[o,a]),o&&!Array.isArray(o)?null:r.createElement(u,t)},S=["children"],T=function(r){return r&&"object"===m(r)?r.id||r["@id"]:r},w=function(t){var e=t.children,n=y(t,S),o=r.Children.only(e);return r.createElement(f,n,r.cloneElement(o,{format:T}))};export{d as ImageInput,A as MultiLinesInput,h as MultiServerAutocompleteArrayInput,x as MultiServerAutocompleteInput,E as ReferenceArrayInput,w as ReferenceInput};
//# sourceMappingURL=index.es.js.map
