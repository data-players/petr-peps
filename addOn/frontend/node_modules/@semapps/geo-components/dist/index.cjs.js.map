{"version":3,"file":"index.cjs.js","sources":["../../../node_modules/autosuggest-highlight/match/index.js","../../../node_modules/autosuggest-highlight/parse/index.js","../src/LocationInput.js","../src/MapList/MarkerClusterGroup.js","../src/MapList/QueryStringUpdater.js","../src/MapList/MobileDrawer.js","../src/MapList/MapList.js","../src/MapList/DefaultPopupContent.js","../src/MapField/ChangeView.js","../src/MapField/MapField.js","../src/extractContext.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.AutosuggestHighlightMatch=t():e.AutosuggestHighlightMatch=t()}(this,(()=>{return e={772:(e,t,o)=>{const r=o(826).remove,i=/[.*+?^${}()|[\\]\\\\]/g,n=/[a-z0-9_]/i,u=/\\s+/;e.exports=function(e,t,o){var s,a;a={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},s=(s=o)||{},Object.keys(s).forEach((e=>{a[e]=!!s[e]})),o=a;const c=Array.from(e).map((e=>r(e)));let l=c.join(\"\");return(t=r(t)).trim().split(u).filter((e=>e.length>0)).reduce(((e,t)=>{const r=t.length,u=!o.insideWords&&n.test(t[0])?\"\\\\b\":\"\",s=new RegExp(u+t.replace(i,\"\\\\$&\"),\"i\");let a,A;if(a=s.exec(l),o.requireMatchAll&&null===a)return l=\"\",[];for(;a;){A=a.index;const t=r-c.slice(A,A+r).join(\"\").length,i=A-c.slice(0,A).join(\"\").length,n=[A+i,A+r+i+t];if(n[0]!==n[1]&&e.push(n),l=l.slice(0,A)+new Array(r+1).join(\" \")+l.slice(A+r),!o.findAllOccurrences)break;a=s.exec(l)}return e}),[]).sort(((e,t)=>e[0]-t[0]))}},826:e=>{var t={À:\"A\",Á:\"A\",Â:\"A\",Ã:\"A\",Ä:\"A\",Å:\"A\",Ấ:\"A\",Ắ:\"A\",Ẳ:\"A\",Ẵ:\"A\",Ặ:\"A\",Æ:\"AE\",Ầ:\"A\",Ằ:\"A\",Ȃ:\"A\",Ç:\"C\",Ḉ:\"C\",È:\"E\",É:\"E\",Ê:\"E\",Ë:\"E\",Ế:\"E\",Ḗ:\"E\",Ề:\"E\",Ḕ:\"E\",Ḝ:\"E\",Ȇ:\"E\",Ì:\"I\",Í:\"I\",Î:\"I\",Ï:\"I\",Ḯ:\"I\",Ȋ:\"I\",Ð:\"D\",Ñ:\"N\",Ò:\"O\",Ó:\"O\",Ô:\"O\",Õ:\"O\",Ö:\"O\",Ø:\"O\",Ố:\"O\",Ṍ:\"O\",Ṓ:\"O\",Ȏ:\"O\",Ù:\"U\",Ú:\"U\",Û:\"U\",Ü:\"U\",Ý:\"Y\",à:\"a\",á:\"a\",â:\"a\",ã:\"a\",ä:\"a\",å:\"a\",ấ:\"a\",ắ:\"a\",ẳ:\"a\",ẵ:\"a\",ặ:\"a\",æ:\"ae\",ầ:\"a\",ằ:\"a\",ȃ:\"a\",ç:\"c\",ḉ:\"c\",è:\"e\",é:\"e\",ê:\"e\",ë:\"e\",ế:\"e\",ḗ:\"e\",ề:\"e\",ḕ:\"e\",ḝ:\"e\",ȇ:\"e\",ì:\"i\",í:\"i\",î:\"i\",ï:\"i\",ḯ:\"i\",ȋ:\"i\",ð:\"d\",ñ:\"n\",ò:\"o\",ó:\"o\",ô:\"o\",õ:\"o\",ö:\"o\",ø:\"o\",ố:\"o\",ṍ:\"o\",ṓ:\"o\",ȏ:\"o\",ù:\"u\",ú:\"u\",û:\"u\",ü:\"u\",ý:\"y\",ÿ:\"y\",Ā:\"A\",ā:\"a\",Ă:\"A\",ă:\"a\",Ą:\"A\",ą:\"a\",Ć:\"C\",ć:\"c\",Ĉ:\"C\",ĉ:\"c\",Ċ:\"C\",ċ:\"c\",Č:\"C\",č:\"c\",C̆:\"C\",c̆:\"c\",Ď:\"D\",ď:\"d\",Đ:\"D\",đ:\"d\",Ē:\"E\",ē:\"e\",Ĕ:\"E\",ĕ:\"e\",Ė:\"E\",ė:\"e\",Ę:\"E\",ę:\"e\",Ě:\"E\",ě:\"e\",Ĝ:\"G\",Ǵ:\"G\",ĝ:\"g\",ǵ:\"g\",Ğ:\"G\",ğ:\"g\",Ġ:\"G\",ġ:\"g\",Ģ:\"G\",ģ:\"g\",Ĥ:\"H\",ĥ:\"h\",Ħ:\"H\",ħ:\"h\",Ḫ:\"H\",ḫ:\"h\",Ĩ:\"I\",ĩ:\"i\",Ī:\"I\",ī:\"i\",Ĭ:\"I\",ĭ:\"i\",Į:\"I\",į:\"i\",İ:\"I\",ı:\"i\",Ĳ:\"IJ\",ĳ:\"ij\",Ĵ:\"J\",ĵ:\"j\",Ķ:\"K\",ķ:\"k\",Ḱ:\"K\",ḱ:\"k\",K̆:\"K\",k̆:\"k\",Ĺ:\"L\",ĺ:\"l\",Ļ:\"L\",ļ:\"l\",Ľ:\"L\",ľ:\"l\",Ŀ:\"L\",ŀ:\"l\",Ł:\"l\",ł:\"l\",Ḿ:\"M\",ḿ:\"m\",M̆:\"M\",m̆:\"m\",Ń:\"N\",ń:\"n\",Ņ:\"N\",ņ:\"n\",Ň:\"N\",ň:\"n\",ŉ:\"n\",N̆:\"N\",n̆:\"n\",Ō:\"O\",ō:\"o\",Ŏ:\"O\",ŏ:\"o\",Ő:\"O\",ő:\"o\",Œ:\"OE\",œ:\"oe\",P̆:\"P\",p̆:\"p\",Ŕ:\"R\",ŕ:\"r\",Ŗ:\"R\",ŗ:\"r\",Ř:\"R\",ř:\"r\",R̆:\"R\",r̆:\"r\",Ȓ:\"R\",ȓ:\"r\",Ś:\"S\",ś:\"s\",Ŝ:\"S\",ŝ:\"s\",Ş:\"S\",Ș:\"S\",ș:\"s\",ş:\"s\",Š:\"S\",š:\"s\",Ţ:\"T\",ţ:\"t\",ț:\"t\",Ț:\"T\",Ť:\"T\",ť:\"t\",Ŧ:\"T\",ŧ:\"t\",T̆:\"T\",t̆:\"t\",Ũ:\"U\",ũ:\"u\",Ū:\"U\",ū:\"u\",Ŭ:\"U\",ŭ:\"u\",Ů:\"U\",ů:\"u\",Ű:\"U\",ű:\"u\",Ų:\"U\",ų:\"u\",Ȗ:\"U\",ȗ:\"u\",V̆:\"V\",v̆:\"v\",Ŵ:\"W\",ŵ:\"w\",Ẃ:\"W\",ẃ:\"w\",X̆:\"X\",x̆:\"x\",Ŷ:\"Y\",ŷ:\"y\",Ÿ:\"Y\",Y̆:\"Y\",y̆:\"y\",Ź:\"Z\",ź:\"z\",Ż:\"Z\",ż:\"z\",Ž:\"Z\",ž:\"z\",ſ:\"s\",ƒ:\"f\",Ơ:\"O\",ơ:\"o\",Ư:\"U\",ư:\"u\",Ǎ:\"A\",ǎ:\"a\",Ǐ:\"I\",ǐ:\"i\",Ǒ:\"O\",ǒ:\"o\",Ǔ:\"U\",ǔ:\"u\",Ǖ:\"U\",ǖ:\"u\",Ǘ:\"U\",ǘ:\"u\",Ǚ:\"U\",ǚ:\"u\",Ǜ:\"U\",ǜ:\"u\",Ứ:\"U\",ứ:\"u\",Ṹ:\"U\",ṹ:\"u\",Ǻ:\"A\",ǻ:\"a\",Ǽ:\"AE\",ǽ:\"ae\",Ǿ:\"O\",ǿ:\"o\",Þ:\"TH\",þ:\"th\",Ṕ:\"P\",ṕ:\"p\",Ṥ:\"S\",ṥ:\"s\",X́:\"X\",x́:\"x\",Ѓ:\"Г\",ѓ:\"г\",Ќ:\"К\",ќ:\"к\",A̋:\"A\",a̋:\"a\",E̋:\"E\",e̋:\"e\",I̋:\"I\",i̋:\"i\",Ǹ:\"N\",ǹ:\"n\",Ồ:\"O\",ồ:\"o\",Ṑ:\"O\",ṑ:\"o\",Ừ:\"U\",ừ:\"u\",Ẁ:\"W\",ẁ:\"w\",Ỳ:\"Y\",ỳ:\"y\",Ȁ:\"A\",ȁ:\"a\",Ȅ:\"E\",ȅ:\"e\",Ȉ:\"I\",ȉ:\"i\",Ȍ:\"O\",ȍ:\"o\",Ȑ:\"R\",ȑ:\"r\",Ȕ:\"U\",ȕ:\"u\",B̌:\"B\",b̌:\"b\",Č̣:\"C\",č̣:\"c\",Ê̌:\"E\",ê̌:\"e\",F̌:\"F\",f̌:\"f\",Ǧ:\"G\",ǧ:\"g\",Ȟ:\"H\",ȟ:\"h\",J̌:\"J\",ǰ:\"j\",Ǩ:\"K\",ǩ:\"k\",M̌:\"M\",m̌:\"m\",P̌:\"P\",p̌:\"p\",Q̌:\"Q\",q̌:\"q\",Ř̩:\"R\",ř̩:\"r\",Ṧ:\"S\",ṧ:\"s\",V̌:\"V\",v̌:\"v\",W̌:\"W\",w̌:\"w\",X̌:\"X\",x̌:\"x\",Y̌:\"Y\",y̌:\"y\",A̧:\"A\",a̧:\"a\",B̧:\"B\",b̧:\"b\",Ḑ:\"D\",ḑ:\"d\",Ȩ:\"E\",ȩ:\"e\",Ɛ̧:\"E\",ɛ̧:\"e\",Ḩ:\"H\",ḩ:\"h\",I̧:\"I\",i̧:\"i\",Ɨ̧:\"I\",ɨ̧:\"i\",M̧:\"M\",m̧:\"m\",O̧:\"O\",o̧:\"o\",Q̧:\"Q\",q̧:\"q\",U̧:\"U\",u̧:\"u\",X̧:\"X\",x̧:\"x\",Z̧:\"Z\",z̧:\"z\"},o=Object.keys(t).join(\"|\"),r=new RegExp(o,\"g\"),i=new RegExp(o,\"\"),n=function(e){return e.replace(r,(function(e){return t[e]}))};e.exports=n,e.exports.has=function(e){return!!e.match(i)},e.exports.remove=n}},t={},function o(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}(772);var e,t}));","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.AutosuggestHighlightParse=e():t.AutosuggestHighlightParse=e()}(this,(()=>{return t={705:t=>{t.exports=function(t,e){const h=[];return 0===e.length?h.push({text:t,highlight:!1}):e[0][0]>0&&h.push({text:t.slice(0,e[0][0]),highlight:!1}),e.forEach(((i,o)=>{const s=i[0],r=i[1];h.push({text:t.slice(s,r),highlight:!0}),o===e.length-1?r<t.length&&h.push({text:t.slice(r,t.length),highlight:!1}):r<e[o+1][0]&&h.push({text:t.slice(r,e[o+1][0]),highlight:!1})})),h}}},e={},function h(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,h),s.exports}(705);var t,e}));","import React, { useState, useMemo, useEffect } from 'react';\nimport { FieldTitle, InputHelperText, useInput, useTranslate, useLocale, useRecordContext, useResourceContext, useTheme } from 'react-admin';\nimport { TextField, Typography, Grid } from '@mui/material';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport LocationOnIcon from '@mui/icons-material/LocationOn';\nimport { default as highlightMatch } from 'autosuggest-highlight/match';\nimport { default as highlightParse } from 'autosuggest-highlight/parse';\nimport throttle from 'lodash.throttle';\nimport { styled } from '@mui/system';\n\nconst StyledLocationOnIcon = styled(LocationOnIcon)(({ theme }) => ({\n  color: theme.palette.text.secondary,\n  marginRight: theme.spacing(2)\n}));\n\nconst selectOptionText = (option, optionText) => {\n  if (option.place_name) {\n    return option.place_name;\n  } else if (typeof optionText === 'string') {\n    return option[optionText];\n  } else if (typeof optionText === 'function') {\n    return optionText(option);\n  }\n};\n\nconst LocationInput = ({\n  mapboxConfig,\n  source,\n  label,\n  parse,\n  optionText,\n  helperText,\n  ...rest\n}) => {\n  if (!mapboxConfig) {\n    throw new Error('@semapps/geo-components : No mapbox configuration');\n  }\n  if (!mapboxConfig.access_token) {\n    throw new Error('@semapps/geo-components : No access token in mapbox configuration');\n  }\n\n  const record = useRecordContext();\n  const resource = useResourceContext();\n  const locale = useLocale();\n  const translate = useTranslate();\n\n  const [keyword, setKeyword] = useState(''); // Typed keywords\n  const [options, setOptions] = useState([]); // Options returned by MapBox\n\n  // Do not pass the `parse` prop to useInput, as we manually call it on the onChange prop below\n  const {\n    field: { value, onChange, onBlur /*, onFocus*/ },\n    isRequired,\n    fieldState: { error, /*submitError,*/ isTouched }\n  } = useInput({ resource, source, ...rest });\n\n  const fetchMapbox = useMemo(\n    () =>\n      throttle((keyword, callback) => {\n        const fetchUrl = new URL(`https://api.mapbox.com/geocoding/v5/mapbox.places/${keyword}.json`);\n\n        // Use locale as default language\n        if (!mapboxConfig.language) mapboxConfig.language = locale;\n\n        // All options available at https://docs.mapbox.com/api/search/geocoding/#forward-geocoding\n        Object.entries(mapboxConfig).forEach(([key, value]) => {\n          if (Array.isArray(value)) {\n            value = value.join(',');\n          } else if (typeof value === 'boolean') {\n            value = value ? 'true' : 'false';\n          }\n          fetchUrl.searchParams.set(key, value);\n        });\n\n        fetch(fetchUrl.toString())\n          .then(res => res.json())\n          .then(json => callback(json));\n      }, 200),\n    [mapboxConfig, locale]\n  );\n\n  useEffect(() => {\n    // Do not trigger search if text input is empty or if it is the same as the current value\n    if (!keyword || keyword === selectOptionText(value, optionText)) {\n      return undefined;\n    } else {\n      fetchMapbox(keyword, results => setOptions(results.features));\n    }\n  }, [value, keyword, fetchMapbox]);\n\n  return (\n    <Autocomplete\n      autoComplete\n      value={value || null}\n      // We must include the current value as an option, to avoid this error\n      // https://github.com/mui-org/material-ui/issues/18514#issuecomment-636096386\n      options={value ? [value, ...options] : options}\n      // Do not show the current value as an option (this would break renderOptions)\n      filterSelectedOptions\n      // For some reasons, this prop has to be passed\n      filterOptions={x => x}\n      getOptionLabel={option => selectOptionText(option, optionText)}\n      isOptionEqualToValue={(option, value) =>\n        selectOptionText(option, optionText) === selectOptionText(value, optionText)\n      }\n      // This function is called when the user selects an option\n      onChange={(event, newValue) => {\n        // Parse only if the value is not null (happens if the user clears the value)\n        if (newValue && parse) newValue = parse(newValue);\n        onChange(newValue);\n        setOptions([]);\n      }}\n      onInputChange={(event, newKeyword) => setKeyword(newKeyword)}\n      noOptionsText={translate('ra.navigation.no_results')}\n      renderInput={params => {\n        // Autocomplete=off doesn't work anymore in modern browsers\n        // https://stackoverflow.com/a/40791726/7900695\n        params.inputProps.autoComplete = 'new-password';\n        return (\n          <TextField\n            {...params}\n            inputProps={{\n              ...params.inputProps,\n              onBlur: e => {\n                onBlur(e);\n                if (params.inputProps.onBlur) {\n                  params.inputProps.onBlur(e);\n                }\n              }/*,\n              onFocus: e => {\n                onFocus(e);\n                if (params.inputProps.onFocus) {\n                  params.inputProps.onFocus(e);\n                }\n              }*/\n            }}\n            label={\n              label !== '' &&\n              label !== false && (\n                <FieldTitle label={label} source={source} resource={resource} isRequired={isRequired} />\n              )\n            }\n            error={!!(isTouched && (error /*|| submitError*/))}\n            helperText={<InputHelperText touched={isTouched} error={error /*|| submitError*/} helperText={helperText} />}\n            {...rest}\n          />\n        );\n      }}\n      renderOption={(props, option, state) => {\n        const matches = highlightMatch(option.text, keyword);\n        const parts = highlightParse(option.text, matches);\n\n        return (\n          <li {...props}>\n            <Grid container alignItems=\"center\">\n              <Grid item>\n                <StyledLocationOnIcon />\n              </Grid>\n              <Grid item xs>\n                {typeof parts === 'string'\n                  ? parts\n                  : parts.map((part, index) => (\n                      <span key={index} style={{ fontWeight: part.highlight ? 700 : 400 }}>\n                        {part.text}\n                      </span>\n                    ))}\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  {option.place_name}\n                </Typography>\n              </Grid>\n            </Grid>\n          </li>\n        );\n      }}\n      {...rest}\n    />\n  );\n};\n\nLocationInput.defaultProps = {\n  variant: 'outlined',\n  size: 'small'\n};\n\nexport default LocationInput;\n","import L from 'leaflet';\nimport { createPathComponent } from '@react-leaflet/core';\nimport 'leaflet.markercluster';\n\n// Taken from https://github.com/changey/react-leaflet-markercluster/blob/60992857087c181ada1e8e6659a6666a13c1f868/src/react-leaflet-markercluster.js\nfunction createMarkerCluster({ children: _c, ...props }, context) {\n  const clusterProps = {};\n  const clusterEvents = {};\n  // Splitting props and events to different objects\n  Object.entries(props).forEach(([propName, prop]) =>\n    propName.startsWith('on') ? (clusterEvents[propName] = prop) : (clusterProps[propName] = prop)\n  );\n\n  const instance = new L.MarkerClusterGroup(clusterProps);\n\n  // Initializing event listeners\n  Object.entries(clusterEvents).forEach(([eventAsProp, callback]) => {\n    const clusterEvent = `cluster${eventAsProp.substring(2).toLowerCase()}`;\n    instance.on(clusterEvent, callback);\n  });\n  return {\n    instance,\n    context: {\n      ...context,\n      layerContainer: instance\n    }\n  };\n}\n\nconst MarkerClusterGroup = createPathComponent(createMarkerCluster);\n\nexport default MarkerClusterGroup;\n","import { useMapEvents } from 'react-leaflet';\nimport { useSearchParams } from 'react-router-dom';\n\n// Keep the zoom and center in query string, so that when we navigate back to the page, it stays focused on the same area\nconst QueryStringUpdater = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  useMapEvents({\n    moveend: test => {\n      setSearchParams(params => ({ \n        ...Object.fromEntries(params), \n        lat: test.target.getCenter().lat, \n        lng: test.target.getCenter().lng, \n        zoom: test.target.getZoom() \n      }));\n    },\n    zoomend: test => {\n      setSearchParams(params => ({ \n        ...Object.fromEntries(params), \n        zoom: test.target.getZoom() \n      }));\n    }\n  });\n\n  return null;\n};\n\nexport default QueryStringUpdater;\n","import React, { useEffect } from 'react';\nimport { useMap } from \"react-leaflet\";\nimport { useRecordContext } from 'react-admin';\nimport { Drawer, Box, IconButton } from '@mui/material';\nimport makeStyles from '@mui/styles/makeStyles';\nimport ClearIcon from '@mui/icons-material/Clear';\n\nconst useStyles = makeStyles(() => ({\n  closeButton: {\n    position: 'absolute',\n    zIndex: 1400,\n    top: 0,\n    right: 0\n  }\n}));\n\nconst MobileDrawer = ({ popupContent, onClose }) => {\n  const classes = useStyles();\n  const record = useRecordContext();\n  const map = useMap();\n  useEffect(() => {\n    if (record) {\n      map.setView([record.latitude, record.longitude]);\n    }\n  }, [record, map])\n\n  return (\n    <Drawer anchor=\"bottom\" open={!!record} onClose={onClose}>\n      <Box p={1} position=\"relative\">\n        <IconButton onClick={onClose} className={classes.closeButton} size=\"large\">\n          <ClearIcon />\n        </IconButton>\n        {React.createElement(popupContent)}\n      </Box>\n    </Drawer>\n  );\n};\n\nexport default MobileDrawer;\n","import React, { useState } from 'react';\nimport { useListContext, RecordContextProvider } from 'react-admin';\nimport { useLocation } from 'react-router-dom';\nimport { useMediaQuery, Box } from '@mui/material';\nimport makeStyles from '@mui/styles/makeStyles';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport 'leaflet-defaulticon-compatibility';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline } from 'react-leaflet';\nimport MarkerClusterGroup from './MarkerClusterGroup';\nimport DefaultPopupContent from './DefaultPopupContent';\nimport QueryStringUpdater from './QueryStringUpdater';\nimport MobileDrawer from \"./MobileDrawer\";\n\nconst useStyles = makeStyles(() => ({\n  isLoading: {\n    zIndex: 1000,\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n}));\n\nconst MapList = ({\n  latitude,\n  longitude,\n  label,\n  description,\n  popupContent,\n  height,\n  center,\n  zoom,\n  groupClusters,\n  boundToMarkers,\n  connectMarkers,\n  ...otherProps\n}) => {\n  const { data, isLoading } = useListContext();\n  const xs = useMediaQuery(theme => theme.breakpoints.down('sm'), { noSsr: true });\n  const [drawerRecord, setDrawerRecord] = useState(null);\n  const classes = useStyles();\n\n  // Get the zoom and center from query string, if available\n  const location = useLocation();\n  const query = new URLSearchParams(location.search);\n  center = query.has('lat') && query.has('lng') ? [query.get('lat'), query.get('lng')] : center;\n  zoom = query.has('zoom') ? query.get('zoom') : zoom;\n\n  let previousRecord;\n\n  const records = isLoading\n    ? []\n    : data\n      .map(record => ({\n        ...record,\n        latitude: latitude && latitude(record),\n        longitude: longitude && longitude(record),\n        label: label && label(record),\n        description: description && description(record)\n      }))\n      .filter(record => record.latitude && record.longitude);\n\n  const bounds =\n    boundToMarkers && records.length > 0 ? records.map(record => [record.latitude, record.longitude]) : undefined;\n\n  // Do not display anything if the bounds are not ready, otherwise the MapContainer will not be initialized correctly\n  if (boundToMarkers && !bounds) return null;\n\n  const markers = records.map((record, i) => {\n    const marker = (\n      <React.Fragment key={i}>\n        <Marker\n          position={[record.latitude, record.longitude]}\n          eventHandlers={\n            xs\n              ? {\n                  click: () => setDrawerRecord(record)\n                }\n              : undefined\n          }\n        >\n          {!xs && \n            <Popup>\n              <RecordContextProvider value={record}>\n                {React.createElement(popupContent)}\n              </RecordContextProvider>\n            </Popup>\n          }\n        </Marker>\n        {connectMarkers && previousRecord && (\n          <Polyline\n            positions={[\n              [previousRecord.latitude, previousRecord.longitude],\n              [record.latitude, record.longitude]\n            ]}\n          />\n        )}\n      </React.Fragment>\n    );\n\n    // Save record so that we can trace lines\n    previousRecord = record;\n\n    return marker;\n  });\n\n  return (\n    <MapContainer\n      style={{ height }}\n      center={!boundToMarkers ? center : undefined}\n      zoom={!boundToMarkers ? zoom : undefined}\n      bounds={bounds}\n      {...otherProps}\n    >\n      <TileLayer\n        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n      {isLoading && (\n        <Box alignItems=\"center\" className={classes.isLoading}>\n          <CircularProgress size={60} thickness={6} />\n        </Box>\n      )}\n      {groupClusters ? <MarkerClusterGroup showCoverageOnHover={false}>{markers}</MarkerClusterGroup> : markers}\n      <QueryStringUpdater />\n      <RecordContextProvider value={drawerRecord}>\n        <MobileDrawer\n          popupContent={popupContent}\n          onClose={() => setDrawerRecord(null)}\n        />\n      </RecordContextProvider>\n    </MapContainer>\n  );\n};\n\nMapList.defaultProps = {\n  height: 700,\n  center: [47, 2.213749],\n  zoom: 6,\n  groupClusters: true,\n  connectMarkers: false,\n  scrollWheelZoom: false,\n  popupContent: DefaultPopupContent\n};\n\nexport default MapList;\n","import React from 'react';\nimport { ShowButton, EditButton, useResourceDefinition, useRecordContext } from 'react-admin';\nimport { Typography } from '@mui/material';\n\nconst DefaultPopupContent = () => {\n  const record = useRecordContext();\n  const resourceDefinition = useResourceDefinition({});\n  if (!record) return null;\n  return (\n    <>\n      {record.label && <Typography variant=\"h5\">{record.label}</Typography>}\n      {record.description && (\n        <Typography>\n          {record.description.length > 150 ? record.description.substring(0, 150) + '...' : record.description}\n        </Typography>\n      )}\n      {resourceDefinition.hasShow && <ShowButton />}\n      {resourceDefinition.hasEdit && <EditButton />}\n    </>\n  );\n};\n\nexport default DefaultPopupContent;\n","import React from 'react';\nimport { useMap } from 'react-leaflet';\n\nconst ChangeView = ({ center, zoom }) => {\n  const map = useMap();\n  map.setView(center, zoom);\n  return null;\n};\n\nexport default ChangeView;\n","import React from 'react';\nimport { useRecordContext } from 'react-admin';\nimport { MapContainer, TileLayer, Marker } from 'react-leaflet';\nimport { Box, Typography } from '@mui/material';\nimport ChangeView from './ChangeView';\n\nconst MapField = ({ latitude, longitude, address, height, typographyProps, ...rest }) => {\n  const record = useRecordContext();\n  const position = [latitude(record), longitude(record)];\n\n  // Do not display the component if it has no latitude or longitude\n  \n  if (!position[0] || !position[1]) return null;\n\n  return (\n    <Box>\n      {address && (\n        <Box mt={1} mb={1}>\n          <Typography {...typographyProps}>{address(record)}</Typography>\n        </Box>\n      )}\n      <MapContainer style={{ height }} center={position} {...rest}>\n        <ChangeView center={position} />\n        <TileLayer\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        <Marker position={position} />\n      </MapContainer>\n    </Box>\n  );\n};\n\nMapField.defaultProps = {\n  height: 400,\n  zoom: 11\n};\n\nexport default MapField;\n","const extractContext = (context, key) => {\n  const property = context.find(property => property.id.startsWith(key + '.'));\n  if (property) return property.text;\n};\n\nexport default extractContext;\n"],"names":["e","t","module","exports","772","o","r","remove","i","n","u","s","a","insideWords","findAllOccurrences","requireMatchAll","Object","keys","forEach","c","Array","from","map","l","join","trim","split","filter","length","reduce","test","RegExp","replace","A","exec","index","slice","push","sort","826","À","Á","Â","Ã","Ä","Å","Ấ","Ắ","Ẳ","Ẵ","Ặ","Æ","Ầ","Ằ","Ȃ","Ç","Ḉ","È","É","Ê","Ë","Ế","Ḗ","Ề","Ḕ","Ḝ","Ȇ","Ì","Í","Î","Ï","Ḯ","Ȋ","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","Ø","Ố","Ṍ","Ṓ","Ȏ","Ù","Ú","Û","Ü","Ý","à","á","â","ã","ä","å","ấ","ắ","ẳ","ẵ","ặ","æ","ầ","ằ","ȃ","ç","ḉ","è","é","ê","ë","ế","ḗ","ề","ḕ","ḝ","ȇ","ì","í","î","ï","ḯ","ȋ","ð","ñ","ò","ó","ô","õ","ö","ø","ố","ṍ","ṓ","ȏ","ù","ú","û","ü","ý","ÿ","Ā","ā","Ă","ă","Ą","ą","Ć","ć","Ĉ","ĉ","Ċ","ċ","Č","č","C̆","c̆","Ď","ď","Đ","đ","Ē","ē","Ĕ","ĕ","Ė","ė","Ę","ę","Ě","ě","Ĝ","Ǵ","ĝ","ǵ","Ğ","ğ","Ġ","ġ","Ģ","ģ","Ĥ","ĥ","Ħ","ħ","Ḫ","ḫ","Ĩ","ĩ","Ī","ī","Ĭ","ĭ","Į","į","İ","ı","Ĳ","ĳ","Ĵ","ĵ","Ķ","ķ","Ḱ","ḱ","K̆","k̆","Ĺ","ĺ","Ļ","ļ","Ľ","ľ","Ŀ","ŀ","Ł","ł","Ḿ","ḿ","M̆","m̆","Ń","ń","Ņ","ņ","Ň","ň","ŉ","N̆","n̆","Ō","ō","Ŏ","ŏ","Ő","ő","Œ","œ","P̆","p̆","Ŕ","ŕ","Ŗ","ŗ","Ř","ř","R̆","r̆","Ȓ","ȓ","Ś","ś","Ŝ","ŝ","Ş","Ș","ș","ş","Š","š","Ţ","ţ","ț","Ț","Ť","ť","Ŧ","ŧ","T̆","t̆","Ũ","ũ","Ū","ū","Ŭ","ŭ","Ů","ů","Ű","ű","Ų","ų","Ȗ","ȗ","V̆","v̆","Ŵ","ŵ","Ẃ","ẃ","X̆","x̆","Ŷ","ŷ","Ÿ","Y̆","y̆","Ź","ź","Ż","ż","Ž","ž","ſ","ƒ","Ơ","ơ","Ư","ư","Ǎ","ǎ","Ǐ","ǐ","Ǒ","ǒ","Ǔ","ǔ","Ǖ","ǖ","Ǘ","ǘ","Ǚ","ǚ","Ǜ","ǜ","Ứ","ứ","Ṹ","ṹ","Ǻ","ǻ","Ǽ","ǽ","Ǿ","ǿ","Þ","þ","Ṕ","ṕ","Ṥ","ṥ","X́","x́","Ѓ","ѓ","Ќ","ќ","A̋","a̋","E̋","e̋","I̋","i̋","Ǹ","ǹ","Ồ","ồ","Ṑ","ṑ","Ừ","ừ","Ẁ","ẁ","Ỳ","ỳ","Ȁ","ȁ","Ȅ","ȅ","Ȉ","ȉ","Ȍ","ȍ","Ȑ","ȑ","Ȕ","ȕ","B̌","b̌","Č̣","č̣","Ê̌","ê̌","F̌","f̌","Ǧ","ǧ","Ȟ","ȟ","J̌","ǰ","Ǩ","ǩ","M̌","m̌","P̌","p̌","Q̌","q̌","Ř̩","ř̩","Ṧ","ṧ","V̌","v̌","W̌","w̌","X̌","x̌","Y̌","y̌","A̧","a̧","B̧","b̧","Ḑ","ḑ","Ȩ","ȩ","Ɛ̧","ɛ̧","Ḩ","ḩ","I̧","i̧","Ɨ̧","ɨ̧","M̧","m̧","O̧","o̧","Q̧","q̧","U̧","u̧","X̧","x̧","Z̧","z̧","has","match","705","h","text","highlight","StyledLocationOnIcon","styled","LocationOnIcon","_ref","theme","color","palette","secondary","marginRight","spacing","selectOptionText","option","optionText","place_name","LocationInput","_ref2","mapboxConfig","source","label","parse","helperText","rest","_objectWithoutProperties","_excluded","Error","access_token","useRecordContext","resource","useResourceContext","locale","useLocale","translate","useTranslate","_useState2","_slicedToArray","useState","keyword","setKeyword","_useState4","options","setOptions","_useInput","useInput","_objectSpread","_useInput$field","field","value","onChange","onBlur","isRequired","_useInput$fieldState","fieldState","error","isTouched","fetchMapbox","useMemo","throttle","callback","fetchUrl","URL","language","entries","_ref3","_ref4","key","isArray","searchParams","set","fetch","toString","then","res","json","useEffect","results","features","React","Autocomplete","_extends","autoComplete","filterSelectedOptions","filterOptions","x","getOptionLabel","isOptionEqualToValue","event","newValue","onInputChange","newKeyword","noOptionsText","renderInput","params","inputProps","createElement","TextField","FieldTitle","InputHelperText","touched","renderOption","props","state","matches","highlightMatch","parts","highlightParse","Grid","container","alignItems","item","xs","part","style","fontWeight","Typography","variant","defaultProps","size","MarkerClusterGroup","createPathComponent","context","children","clusterProps","clusterEvents","propName","prop","startsWith","instance","L","_ref5","eventAsProp","clusterEvent","substring","toLowerCase","on","layerContainer","QueryStringUpdater","_useSearchParams2","useSearchParams","setSearchParams","useMapEvents","moveend","fromEntries","lat","target","getCenter","lng","zoom","getZoom","zoomend","useStyles","makeStyles","closeButton","position","zIndex","top","right","MobileDrawer","popupContent","onClose","classes","record","useMap","setView","latitude","longitude","Drawer","anchor","open","Box","p","IconButton","onClick","className","ClearIcon","isLoading","left","bottom","display","justifyContent","MapList","previousRecord","description","height","center","groupClusters","boundToMarkers","connectMarkers","otherProps","_useListContext","useListContext","data","useMediaQuery","breakpoints","down","noSsr","drawerRecord","setDrawerRecord","location","useLocation","query","URLSearchParams","search","get","records","bounds","undefined","markers","marker","Fragment","Marker","eventHandlers","click","Popup","RecordContextProvider","Polyline","positions","MapContainer","TileLayer","attribution","url","CircularProgress","thickness","showCoverageOnHover","scrollWheelZoom","resourceDefinition","useResourceDefinition","hasShow","ShowButton","hasEdit","EditButton","ChangeView","MapField","address","typographyProps","mt","mb","property","find","id"],"mappings":"y/GAA6O,IAA2jHA,EAAEC,EAAzuHC,EAAAC,SAAwLH,EAAE,CAACI,IAAI,CAACJ,EAAEC,EAAEI,KAAK,MAAMC,EAAED,EAAE,KAAKE,OAAOC,EAAE,sBAAsBC,EAAE,aAAaC,EAAE,MAAMV,EAAEG,QAAQ,SAASH,EAAEC,EAAEI,GAAG,IAAIM,EAAEC,EAAEA,EAAE,CAACC,aAAY,EAAGC,oBAAmB,EAAGC,iBAAgB,GAAIJ,GAAGA,EAAEN,IAAI,GAAGW,OAAOC,KAAKN,GAAGO,QAASlB,IAAIY,EAAEZ,KAAKW,EAAEX,KAAMK,EAAEO,EAAE,MAAMO,EAAEC,MAAMC,KAAKrB,GAAGsB,IAAKtB,GAAGM,EAAEN,IAAK,IAAIuB,EAAEJ,EAAEK,KAAK,IAAI,OAAOvB,EAAEK,EAAEL,IAAIwB,OAAOC,MAAMhB,GAAGiB,OAAQ3B,GAAGA,EAAE4B,OAAO,GAAIC,OAAQ,CAAC7B,EAAEC,KAAK,MAAMK,EAAEL,EAAE2B,OAAOlB,GAAGL,EAAEQ,aAAaJ,EAAEqB,KAAK7B,EAAE,IAAI,MAAM,GAAGU,EAAE,IAAIoB,OAAOrB,EAAET,EAAE+B,QAAQxB,EAAE,QAAQ,KAAK,IAAII,EAAEqB,EAAE,GAAGrB,EAAED,EAAEuB,KAAKX,GAAGlB,EAAEU,iBAAiB,OAAOH,EAAE,OAAOW,EAAE,GAAG,GAAG,KAAKX,GAAG,CAACqB,EAAErB,EAAEuB,MAAM,MAAMlC,EAAEK,EAAEa,EAAEiB,MAAMH,EAAEA,EAAE3B,GAAGkB,KAAK,IAAII,OAAOpB,EAAEyB,EAAEd,EAAEiB,MAAM,EAAEH,GAAGT,KAAK,IAAII,OAAOnB,EAAE,CAACwB,EAAEzB,EAAEyB,EAAE3B,EAAEE,EAAEP,GAAG,GAAGQ,EAAE,KAAKA,EAAE,IAAIT,EAAEqC,KAAK5B,GAAGc,EAAEA,EAAEa,MAAM,EAAEH,GAAG,IAAIb,MAAMd,EAAE,GAAGkB,KAAK,KAAKD,EAAEa,MAAMH,EAAE3B,IAAID,EAAES,mBAAmB,MAAMF,EAAED,EAAEuB,KAAKX,GAAG,OAAOvB,GAAI,IAAIsC,KAAM,CAACtC,EAAEC,IAAID,EAAE,GAAGC,EAAE,MAAOsC,IAAIvC,IAAI,IAAIC,EAAE,CAACuC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,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"}